<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>농업문화원 NEWS</title> {/* title도 함께 수정했습니다 */}
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>농업문화원 NEWS</h1> {/* 이 부분을 수정했습니다 */}
            <p>최신 관련 뉴스를 확인하세요.</p>
        </header>
        <main id="news-container">
            <p class="loading">뉴스를 불러오는 중입니다...</p>
        </main>
        <footer>
            <p>Powered by News API</p>
        </footer>
    </div>
    <script>
        async function fetchNews() {
            const newsContainer = document.getElementById('news-container');
            try {
                const response = await fetch('/.netlify/functions/get-news');
                const articles = await response.json();

                newsContainer.innerHTML = ''; // 로딩 메시지 제거

                if (articles.length === 0) {
                    newsContainer.innerHTML = '<p>최신 뉴스가 없습니다.</p>';
                    return;
                }

                articles.forEach(article => {
                    if (article.title && article.url) {
                        const newsItem = document.createElement('div');
                        newsItem.classList.add('news-item');

                        const title = document.createElement('h2');
                        const link = document.createElement('a');
                        link.href = article.url;
                        link.textContent = article.title;
                        link.target = '_blank'; // 새 탭에서 열기
                        title.appendChild(link);

                        const description = document.createElement('p');
                        description.textContent = article.description || '';

                        const source = document.createElement('span');
                        source.classList.add('source');
                        source.textContent = `${article.source.name} · ${new Date(article.publishedAt).toLocaleString()}`;
                        
                        newsItem.appendChild(title);
                        newsItem.appendChild(description);
                        newsItem.appendChild(source);

                        newsContainer.appendChild(newsItem);
                    }
                });

            } catch (error) {
                console.error('Error fetching news:', error);
                newsContainer.innerHTML = '<p>뉴스를 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', fetchNews);
    </script>
</body>
</html>